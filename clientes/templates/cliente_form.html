{% extends 'core/panel_admin_base.html' %}
{% load static %}

{% block page_title %}
    {% if object %}Editar Cliente{% else %}Crear Cliente{% endif %}
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h5 class="mb-0 fw-semibold">
            {% if object %}Editar Cliente{% else %}Crear Cliente{% endif %}
        </h5>
        <small class="text-muted">
            Complete la información del cliente
        </small>
    </div>

    <a href="{% url 'clientes:lista_clientes' %}" class="btn btn-light border shadow-sm">
        <i class="bi bi-arrow-left"></i> Volver
    </a>
</div>

<div class="card border-0 shadow-sm rounded-4">
    <div class="card-body p-4">

        <form method="post" novalidate autocomplete="off">
            {% csrf_token %}

            <!-- errores generales -->
            {% if form.non_field_errors %}
            <div class="alert alert-danger">
                {{ form.non_field_errors }}
            </div>
            {% endif %}

            <div class="row g-3">

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Tipo de documento</label>
                    {{ form.tipo_documento }}

                    {% if form.tipo_documento.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.tipo_documento.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Número de documento</label>
                    {{ form.documento }}

                    {% if form.documento.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.documento.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Nombre</label>
                    {{ form.nombre }}

                    {% if form.nombre.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.nombre.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Apellido</label>
                    {{ form.apellido }}

                    {% if form.apellido.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.apellido.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Teléfono</label>
                    {{ form.telefono }}

                    {% if form.telefono.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.telefono.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Correo electrónico</label>
                    {{ form.correo_electronico }}

                    {% if form.correo_electronico.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.correo_electronico.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Departamento</label>
                    {{ form.departamento }}

                    {% if form.departamento.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.departamento.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Ciudad / Municipio</label>

                    <select name="ciudad" id="id_ciudad" class="form-select">
                        <option value="">Seleccione un departamento primero</option>
                    </select>

                    <input
                        type="hidden"
                        name="ciudad_original"
                        id="id_ciudad_original"
                        value="{{ form.ciudad.value|default:'' }}"
                    >

                    {% if form.ciudad.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.ciudad.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-12">
                    <label class="form-label fw-semibold">Dirección completa</label>
                    {{ form.direccion }}

                    {% if form.direccion.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.direccion.errors }}
                    </div>
                    {% endif %}
                </div>

                <div class="col-12 mt-4 text-end">
                    <button type="submit" class="btn btn-primary rounded-pill px-4 shadow-sm">
                        <i class="bi bi-save"></i>
                        {% if object %}Actualizar cliente{% else %}Guardar cliente{% endif %}
                    </button>
                </div>

            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script src="/static/clientes/js/ciudades.js"></script>
{% endblock %}