{% extends 'master.html' %}
{% load static %}

{% block title %}Iniciar Sesión · Arte & Estilos{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'usuarios/css/styles.css' %}">
{% endblock %}

{% block content %}
<!-- Fondo animado de 4 imágenes (usar rutas en static/usuarios/img) -->
<div id="bg-slideshow" aria-hidden="true">
  <div class="slide" style="--i:0; --img: url('{% static 'usuarios/img/1_FondoLogin.png' %}');"></div>
  <div class="slide" style="--i:1; --img: url('{% static 'usuarios/img/2_FondoLogin.png' %}');"></div>
  <div class="slide" style="--i:2; --img: url('{% static 'usuarios/img/3_FondoLogin.png' %}');"></div>
  <div class="slide" style="--i:3; --img: url('{% static 'usuarios/img/4_FondoLogin.png' %}');"></div>
</div>

<section class="login-page py-5">
  <div class="container login-container">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">
        <div class="login-card glassy">
          <div class="login-header">
            <i class="bi bi-box-arrow-in-right"></i>
            <h2 class="login-title">Iniciar Sesión</h2>
          </div>

          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert" data-message-tags="{{ message.tags }}">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          {% endif %}

          <form method="post" novalidate>
            {% csrf_token %}

            <div class="form-floating mb-3">
              {{ form.username }}
              <label for="id_username">Usuario o documento</label>
            </div>

            <div class="form-floating mb-3 position-relative">
              {{ form.password }}
              <label for="id_password">Contraseña</label>
              <button type="button" class="toggle-password btn btn-sm" aria-label="Mostrar/Ocultar" title="Mostrar/Ocultar">
                <i class="bi bi-eye"></i>
              </button>
            </div>

            <button type="submit" class="btn-login">Ingresar</button>
          </form>
          <p class="register-link">
            ¿Olvidaste tu contraseña? <a class="link-floral" href="{% url 'usuarios:password_reset' %}">Recupérala aquí</a>
          </p>
          <p class="register-link">
            ¿No tienes cuenta?
            <a class="link-floral" href="{% url 'usuarios:registro' %}">Regístrate</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}

{% block extra_js %}
<script src="{% static 'usuarios/js/login.js' %}"></script>
<script src="{% static 'usuarios/js/registro.js' %}"></script>
{% endblock %}
